00000000: /*=========================================================
00000001:Секция подключения внешних файлов.
00000002: Поддерживается только один уровень вложенности, 
00000003: include в include запрещена
00000004:=========================================================*/
00000005://>>> Including W:\Ura\Projects\20100322_Clean\IAR\Controller\Climat_Commander\define.h >>>
00000006://---------------------------------------------------------------------------------------------------
00000007:// Controller V1.0
00000008:// Constats define
00000009://---------------------------------------------------------------------------------------------------
00000010:#define          IO_PORT                                        do[3]
00000011:#define          motor_fault                    di[1]
00000012://---------------------------------------------------------------------------------------------------
00000013://---------------------------------------------------------------------------------------------------
00000014://---------------------------------------------------------------------------------------------------
00000015://---------------------------------------------------------------------------------------------------
00000016://<<< End of W:\Ura\Projects\20100322_Clean\IAR\Controller\Climat_Commander\define.h <<<
00000017: /*=========================================================
00000018:Реализована директива #define 
00000019:=========================================================*/
00000020: #define IO_PORT do[3]
00000021: /*=========================================================
00000022:Обьявления переменных
00000023:Переменные могут быть 1, 2, 4х байтными знаковыми и беззнаковыми
00000024:signed/unsigned  char
00000025:signed/unsigned  short
00000026:signed/unsigned  long
00000027:Переменные с плавающей точкой не реализованы в данной версии компилятора
00000028:Возможна первичная инициализвация переменных
00000029:Синтаксис обьявления переменных
00000030:<char><name><;>"                                                   
00000031:<char><name><=><value><;>"                                         
00000032:<unsigned><char><name><;>"                                         
00000033:<unsigned><char><name><=><value><;>"           
00000034:Массивы переменных не реализованы.
00000035:=========================================================*/
00000036: unsigned short i=0;
00000037: short j=55;
00000038: unsigned char  a;
00000039: unsigned char  b=45;
00000040: /*=========================================================
00000041:Выполнение программы начинается с первой инструкции кода
00000042:Первой инструкцией должен быть переход на главную функцию 
00000043:программы, или начало самой программы
00000044:Опрерандами могут выступать
00000045:
00000046:- Порты ввода вывода
00000047:    Цифровые входы DI[0].. DI[10] (только для чтения)
00000048:    Цифровые выходы DO[0].. DO[10] чтение/запись)
00000049:    Аналоговые входы АI[0].. АI[7] (только для чтения)
00000050:    Аналоговые выходы АO[0].. АO[5] чтение/запись)
00000051:    (Количество реальных портов зависит от модели контроллера)
00000052:
00000053:- Обьяевленные ранее переменные
00000054:
00000055:- Внутренние регистры контроллера, такие как таймеры, 
00000056:      регистры модуля PID, FAN...
00000057:
00000058:
00000059:=========================================================*/
00000060: //---------------------------------------------------------------------------------------------------
00000061:goto main;
00000062: //---------------------------------------------------------------------------------------------------
00000063: check_freeze_0:
00000064: do[0]=1;
00000065: ao[0]=0;
00000066:  i=i+5;
00000067:  i[3]=3;
00000068: ret;
00000069: //---------------------------------------------------------------------------------------------------
00000070: main:
00000071:  do[1]=1;
00000072:  ao[3]=1000;
00000073:  i=i+1;
00000074:  IO_PORT=1;
00000075://  i=i+5;
00000076://  j=i>3;
00000077:  do[2] = do[2] ^ di[2];
00000078://  i[3]=3;
00000079:  ao[1]=ai[1];
00000080://  call check_freeze_0;
00000081:  if(ai[0]>0) call check_freeze_0;
00000082:  if(IO_PORT) call check_freeze_0;
00000083:  i=5;
00000084:goto main;
00000085: main_loop:
00000086:// call check_freeze_0;
00000087: 
00000088: goto main_loop;
00000089: //---------------------------------------------------------------------------------------------------
00000090: //---------------------------------------------------------------------------------------------------
00000091:я