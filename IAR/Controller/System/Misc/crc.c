#include "crc.h"
//---------------------------------------------------------------------------
void	InitCRC(u16 *crc)
{
	*crc = CRC16_INIT;
}
//---------------------------------------------------------------------------
void	EndCRC(u16 *crc)
{
	*crc ^= CRC16_FINAL;
}
//---------------------------------------------------------------------------
void	CalcCRC(u8 *p,u16 size, u16 *crc)
{
	u16 i,j;
	for(i=0;i<size;i++)
	{
		*crc ^= (u16)(*(p+i));
		 for(j=0;j<8;j++)
		 {
			 if(1 & *crc)
			 {
				 *crc>>=1;
				 *crc^=CRC16_POLY;
			 }
			 else
			 {
				 *crc>>=1;
			 }
		 }
	}
}
//---------------------------------------------------------------------------
